<script lang="ts">
  // Basic profile state
  let name = $state("Admin User")
  let username = $state("admin")
  let email = $state("admin@example.com")
  let phone = $state("089-123-4567")
  let department = $state("IT Operation")
  let role = $state("Administrator")

  // Password
  let currentPassword = $state("")
  let newPassword = $state("")
  let confirmPassword = $state("")

  // Avatar preview (placeholder)
  let avatarUrl = $state<string | null>(null)

  function onPickAvatar(event: Event) {
    const input = event.target as HTMLInputElement
    if (!input.files || input.files.length === 0) return
    const file = input.files[0]
    const reader = new FileReader()
    reader.onload = () => {
      avatarUrl = reader.result as string
    }
    reader.readAsDataURL(file)
  }

  function saveProfile() {
    // mock save
    alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢")
  }

  function changePassword() {
    if (newPassword.length < 6) {
      alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£")
      return
    }
    if (newPassword !== confirmPassword) {
      alert("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô")
      return
    }
    alert("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")
    currentPassword = ""
    newPassword = ""
    confirmPassword = ""
  }

  const activities = [
    { title: "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö", time: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 09:12" },
    { title: "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ U-1003", time: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô 16:45" },
    { title: "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö", time: "26 ‡∏°.‡∏Ñ. 10:22" },
    { title: "‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", time: "24 ‡∏°.‡∏Ñ. 14:03" },
  ]
</script>

<div class="space-y-6">
  <!-- Header -->
  <div>
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h1>
    <p class="text-gray-600">
      ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
    <!-- Left: Profile card -->
    <section
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 lg:col-span-4"
    >
      <div class="flex flex-col items-center text-center">
        <div class="relative group">
          <div
            class="p-1.5 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600"
          >
            {#if avatarUrl}
              <img
                src={avatarUrl}
                alt="avatar"
                class="w-28 h-28 rounded-full object-cover bg-white ring-4 ring-white shadow"
              />
            {:else}
              <div
                class="w-28 h-28 rounded-full bg-white ring-4 ring-white shadow flex items-center justify-center"
              >
                <div
                  class="w-full h-full rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl font-bold"
                >
                  {name
                    .split(" ")
                    .slice(0, 2)
                    .map((n) => n[0])
                    .join("")
                    .toUpperCase()}
                </div>
              </div>
            {/if}
          </div>
          <label
            class="absolute -bottom-1 -right-1 w-10 h-10 rounded-full bg-gray-900/90 text-white shadow-md flex items-center justify-center cursor-pointer border border-white transition-transform duration-150 group-hover:scale-105"
            title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15.232 5.232l3.536 3.536M4 13V7a2 2 0 012-2h6m4 4L8 18H4v-4l8-8"
              />
            </svg>
            <input
              type="file"
              accept="image/*"
              class="hidden"
              onchange={onPickAvatar}
            />
          </label>
        </div>
        <div class="mt-4">
          <div class="text-lg font-semibold text-gray-900">{name}</div>
          <div class="text-sm text-gray-500">{email}</div>
        </div>
        <div class="w-full grid grid-cols-2 gap-3 mt-6">
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</div>
            <div class="text-sm font-medium text-gray-800">{role}</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-500">‡πÅ‡∏ú‡∏ô‡∏Å</div>
            <div class="text-sm font-medium text-gray-800">{department}</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Right: Forms -->
    <div class="lg:col-span-8 space-y-8">
      <!-- Profile info -->
      <section class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
          <button
            type="button"
            class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium"
            onclick={saveProfile}>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button
          >
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="name">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label
            >
            <input
              id="name"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={name}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="username">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label
            >
            <input
              id="username"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={username}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label
            >
            <input
              id="email"
              type="email"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={email}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label
            >
            <input
              id="phone"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={phone}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="department">‡πÅ‡∏ú‡∏ô‡∏Å</label
            >
            <input
              id="department"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={department}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="role">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label
            >
            <input
              id="role"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={role}
            />
          </div>
        </div>
      </section>

      <!-- Password -->
      <section class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-900">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
          <button
            type="button"
            class="px-4 py-2 rounded-lg bg-gray-900 hover:bg-black text-white text-sm font-medium"
            onclick={changePassword}>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button
          >
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="current">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label
            >
            <input
              id="current"
              type="password"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={currentPassword}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="new">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label
            >
            <input
              id="new"
              type="password"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={newPassword}
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 mb-2"
              for="confirm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label
            >
            <input
              id="confirm"
              type="password"
              class="w-full h-12 rounded-lg border border-gray-300 px-3 bg-gray-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              bind:value={confirmPassword}
            />
          </div>
        </div>
      </section>

      <!-- Activity -->
      <section class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-900">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
          <a href="#" class="text-sm text-blue-600 hover:underline">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a
          >
        </div>
        <ul class="space-y-3">
          {#each activities as a}
            <li class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <div
                  class="w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center"
                  aria-hidden="true"
                >
                  üïí
                </div>
                <div>
                  <div class="font-medium text-gray-900">{a.title}</div>
                  <div class="text-xs text-gray-500">{a.time}</div>
                </div>
              </div>
              <button class="text-sm text-gray-500 hover:text-gray-700"
                >‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button
              >
            </li>
          {/each}
        </ul>
      </section>
    </div>
  </div>
</div>
